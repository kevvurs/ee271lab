module safeHex (clk, reset, enable, ctrl, hex);
	input logic clk, reset, enable;
	input logic {1:0} ctrl;
	output logic [6:0] hex;
	logic [6:0] pattern;
	logic [6:0] symbol;
	logic [6:0] ps, ns;
	parameter flash = 7'b1111111;

	numHex unit (.in(ctrl), .out(symbol));
	
	always_comb
		if (enable) begin
			if (ps == flash) begin
				pattern = symbol;
				ns = flash;
			end
			else begin
				pattern = flash;
				ns = symbol;
			end
		end
		else begin
			pattern = ps;
			ns = ps;
		end
		
	
	assign out = pattern;
	
	always_ff @(posedge clk)
		if (reset)
			ps <= blink;
		else
			ps <= ns;
endmodule

module safeHex_testbench();
	logic clk, reset, enable;
	logic [1:0] ctrl;
	logic [6:0] hex;
	
	safeHex dut (.clk, .reset, .enable, .ctrl, .hex);
	
	parameter CLOCK_PERIOD=100;
	initial begin
		clk <= 0;
		forever #(CLOCK_PERIOD/2) clk <= ~clk;
	end

	initial begin
		reset <= 0;	enable <= 0
		$stop
	end
endmodule
